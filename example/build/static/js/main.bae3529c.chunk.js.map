{"version":3,"sources":["../../src/text.tsx","../../src/typo.tsx","App.tsx","index.tsx"],"names":["spanStyle","display","Text","componentDidMount","this","props","init","str","length","run","pause","setTimeout","updateInterval","clearInterval","pace","whiteSpacePace","setInterval","play","stamp","rewind","style","className","charClassName","key","Date","chars","substr","iteration","animation","i","replay","show","split","map","stop","onStart","onChar","char","onStop","render","block","Component","Typo","textRefs","Array","typo","text","child","ref","React","parent","texts","name","Math","onText","App","next","first","loop","type","onClick","value","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.bae3529c.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport Typo from './typo';\n\nconst defaultPace = 40;\nconst defaultPause = 0;\n\nconst spanStyle = {\n    display: 'inline-block'\n}\n\ninterface Props {\n    /** The pace between two chars in milliseconds. Default is 40 */\n    pace?: number;\n    /** The pace of white spaces to make the text more dynamic */\n    whiteSpacePace?: number;\n    /** The pause before starting the text in milliseconds. Default is 0 */\n    pause?: number;\n    /** Defines if the container css display rule is 'block' or 'inline-block'. Default is false */\n    block?: boolean;\n    /** Displays all the chars at once */\n    stamp?: boolean;\n    /** Prints the chars in the Text backwards */\n    rewind?: boolean;\n    /** Loops the animation */\n    loop?: boolean;\n    /** The Typo controller. Is automatically defined when a Text is in a Typo */\n    parent?: Typo;\n    /** The className assigned to every printed char */\n    charClassName?: string;\n    /** The className assigned to every white space char */\n    whiteSpaceClassName?: string;\n    /** The className of the Text container */\n    className?: string;\n    /**\n     * Called when the first char is printed\n     * @param text The current Text component\n     * */\n    onStart?: (text: Text) => void;\n    /** \n     * Called when a char is printed \n     * @param char The current printed char\n     * @param text The current Text component\n     * */\n    onChar?: (char: string, text: Text) => void;\n    /**\n     * Called when the last char is printed\n     * @param text The current Text component\n     * */\n    onStop?: (text: Text) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element | null;\n}\n\nexport default class Text extends Component<Props, State> {\n\n    private stopped: boolean;\n    private interval: NodeJS.Timeout;\n\n    str: string;\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.str = (this.props.children as string || '').replaceAll(' ', '\\xa0');\n    }\n\n    componentDidMount() {\n        if (!this.props.parent) {\n            this.init();\n            this.run();\n        }\n    }\n\n\n    init() {\n        this.iteration = !this.props.rewind || this.props.parent?.props.rewind ? 0 : this.str.length - 1;\n        this.stopped = false;\n        this.setState({\n            display: null\n        })\n    }\n    \n    run() {\n        const pause = this.props.pause || this.props.parent?.props.pause || defaultPause;\n        setTimeout(() => {\n            this.updateInterval();\n        }, pause);\n    }\n\n    updateInterval() {\n        clearInterval(this.interval);\n        let pace = this.str[this.iteration] != '\\xa0'\n            ? this.props.pace || this.props.parent?.props.pace || defaultPace\n            : (this.props.whiteSpacePace || this.props.parent?.props.whiteSpacePace || this.props.pace || defaultPace);\n\n        this.onStart();\n        this.interval = setInterval(() => this.play(), pace);\n    }\n\n    play() {\n        if (!this.stopped) {\n            const stamp = this.props.stamp || this.props.parent?.props.stamp;\n            const rewind = this.props.rewind || this.props.parent?.props.rewind;\n\n            if (!stamp) {\n                const chars = this.str.substr(0, this.iteration + 1).split('');\n                let display;\n\n                if (rewind) {\n                    display = chars.map((char, i) => {\n                        const style = {\n                            display: 'inline-block',\n                            animation: 'none'\n                        }\n                        return <span className={this.props.charClassName} style={style} key={i}>{char}</span>\n                    });\n                    display.pop();\n                    display.push(<span style={spanStyle} className={this.props.charClassName} key={Date.now()}>{chars.slice(-1)}</span>)\n                } else {\n                    display = chars.map((char, i) => {\n                        return <span style={spanStyle} className={this.props.charClassName} key={i}>{char}</span>\n                    });\n                }\n                this.setState({ display }, () => {\n\n                    this.iteration += rewind ? -1 : 1;\n                    if (\n                        (rewind && this.iteration < -1) ||\n                        (!rewind && this.iteration > this.str.length)\n                    ) {\n                        this.stop();\n                    } else {\n                        this.onChar();\n                    }\n                })\n            } else {\n                this.setState({\n                    display: <span style={spanStyle} className={this.props.charClassName} key={Date.now()}>{this.str}</span>\n                }, () => {\n                    this.iteration = rewind ? 0 : (this.props.children as string).length - 1;\n                    this.onChar();\n                    this.stop();\n                })\n            }\n        }\n    }\n\n    replay() {\n        this.init();\n        this.run();\n    }\n\n    show() {\n        this.setState({\n            display: this.str.split('').map((char, i) => <span style={spanStyle} key={i}>{char}</span>)\n        })\n    }\n\n    stop() {\n        if (this.props.loop) {\n            this.replay();\n        } else {\n            this.stopped = true;\n            this.onStop();\n        }\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onChar() {\n        const rewind = this.props.parent?.props.rewind || this.props.rewind;\n        const char = rewind\n            ? this.str[this.iteration + 1]\n            : this.str[this.iteration - 1];\n\n        this.props.onChar?.(char, this);\n\n        this.props.parent?.props.onChar?.(char, this.props.parent);\n    }\n\n    onStop() {\n        clearInterval(this.interval);\n        this.props.onStop?.(this);\n        this.props?.parent?.play();\n    }\n\n    render() {\n        return <div className={this.props.className} style={{\n            display: this.props.block ? 'block' : 'inline-block'\n        }}>{this.state?.display || '\\u00a0'}</div>\n    }\n}\n","import React, { Component } from 'react'\nimport Text from './text';\n\ninterface Props {\n    /** Prevents the typo from playing */\n    stop?: boolean;\n    /** Defines this typo as being the first to execute when this typo's name is in the 'next' prop of another typo */\n    first?: boolean;\n    /** Prints the chars in the Texts backwards */\n    rewind?: boolean;\n    /** Displays all the chars in the Texts at once */\n    stamp?: boolean;\n    /** The pause before starting the text in milliseconds. Default is 0 */\n    pause?: number;\n    /** The pace between two chars in milliseconds. Default is 40 */\n    pace?: number;\n    /** The pace of white spaces to make the text more dynamic */\n    whiteSpacePace?: number;\n    /** The name of the next Typo to render */\n    next?: string;\n    /** the name of the typo */\n    name?: string;\n    /** the className of the typo container */\n    className?: string;\n\n    /**\n     * Called when the component is mounted\n     * @param typo The current Typo component\n     * */\n    onStart?: (typo: Typo) => void;\n    /**\n    * Called when the current Text component is mounted\n    * @param text The current Text component\n    * @param typo The current Typo component\n    * */\n    onText?: (text: Text, typo: Typo) => void;\n    /**\n     * Called when the last char in the last Text is printed\n     * @param typo The current Typo component\n     * */\n    onStop?: (typo: Typo) => void;\n    /**\n     * Called when a char is printed\n     * @param char The current printed char\n     * @param typo The current Typo component\n     * */\n    onChar?: (char: string, typo: Typo) => void;\n}\n\ninterface State {\n    display: JSX.Element[] | JSX.Element;\n}\n\nexport default class Typo extends Component<Props, State> {\n\n    private static typos: Map<string, Typo> = new Map();\n    private static first: Typo;\n\n    static play(typoName: string) {\n        Typo.typos.get(typoName)?.replay();\n    }\n\n    static stop(typoName: string) {\n        Typo.typos.get(typoName)?.stop();\n    }\n\n    private initiated: boolean;\n\n    name: string;\n    texts: JSX.Element[];\n    textRefs: React.RefObject<Text>[] = [];\n    iteration: number;\n\n    constructor(props: Props) {\n        super(props);\n        this.init();\n    }\n\n    componentDidMount() {\n        if (!this.props.stop) {\n            //si le typo est dans le next d'un autre, on ne lance pas play sauf s'il est first\n            if (!Array.from(Typo.typos.values()).some(typo => typo.props.next == this.name) || Typo.first == this) {\n                this.init();\n                this.play();\n            }\n        }\n    }\n\n    init() {\n        this.initiated = false;\n\n        this.textRefs.forEach(text => text.current?.init());\n\n        this.texts = React.Children.map(this.props.children as JSX.Element, child => {\n            let ref = React.createRef<Text>();\n            this.textRefs.push(ref);\n\n            return <Text {...child.props} ref={ref} parent={this} rewind={this.props.rewind || child.props.rewind}>{child.props.children || ''}</Text>\n        })\n\n        this.iteration = !this.props.rewind ? 0 : this.texts.length == 1 ? 0 : this.texts.length - 1;\n\n        this.name = this.props.name || '_' + Math.random().toString(36).substr(2, 9);\n\n        Typo.typos.set(this.name, this);\n\n        if (typeof Typo.first == 'undefined') {\n            Typo.first = this;\n        }\n    }\n\n    play() {\n        if (!this.initiated) {\n            this.onStart();\n            this.initiated = true;\n        }\n\n        if (\n            (this.props.rewind && this.iteration < 0) || (!this.props.rewind && this.iteration > this.texts.length - 1)) {\n            this.stop();\n        } else {\n            if (this.props.rewind) {\n                for (let i = this.iteration; i >= 0; i--) {\n                    this.textRefs[i].current?.show();\n                }\n            }\n\n            this.textRefs[this.iteration]?.current?.init();\n            this.textRefs[this.iteration]?.current?.run();\n\n            this.iteration += this.props.rewind ? -1 : 1;\n            this.onText();\n        }\n    }\n\n    replay() {\n        this.init();\n        this.play();\n    }\n\n    stop() {\n        this.onStop();\n    }\n\n    onStart() {\n        this.props.onStart?.(this);\n    }\n\n    onText() {\n        const text = this.props.rewind\n            ? this.textRefs[this.iteration + 1]?.current\n            : this.textRefs[this.iteration - 1]?.current;\n\n        if (text) {\n            this.props.onText?.(text, this);\n        }\n    }\n\n    //on lance le event handler onStop et on lance le play du prochain Typo\n    onStop() {\n        this.props.onStop?.(this);\n        if (this.props.next) {\n            Typo.typos.get(this.props.next)?.play();\n        }\n    }\n\n    render() {\n        return <div className={this.props.className} style={{ display: 'inline-block' }}>{this.texts}</div>\n    }\n}\n","import React from 'react'\n\nimport { Text, Typo } from 'reactypo'\n\nconst App = () => {\n  return (\n    <main className='main'>\n\n      <Typo className='header' name={'title'} next='under-contruction' first>\n        <Text pace={100} charClassName=\"wave-infinite title-char\" className=\"title\" stamp>Reactypo</Text>\n        <Text pause={200} charClassName=\"wave-infinite\" className=\"title title2\" stamp>Reactypo</Text>\n        <Text pause={500} whiteSpacePace={100} charClassName=\" sub-title-char\" className={'sub-title'} block>animate and control text</Text>\n        <Text whiteSpacePace={100} charClassName=\" sub-title-char mt-1\" className={'sub-title'} block>with react</Text>\n      </Typo>\n\n      <div className=\"under-contruction\">\n        <div>\n\n          <span>under construction</span>\n          <Text loop pace={200}> ...</Text>\n        </div>\n        </div>\n      <input type=\"button\" className=\"bottom\" onClick={() => Typo.play('title')} value=\"Replay!\" />\n    </main>\n  )\n}\n\nexport default App\n","import './animation.css'\nimport './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}